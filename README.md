# 8_3_Ansible_Yandex

Переменная elk_stack_version определяет версию стека

Хосты подключаются по ssh

Масштабирование происходит за счёт добавления инстансов в соответствующие группы

Структура всех play:
- Хэндлер на перезапуск сервиса (с правами root)
- Скачиваем rpm-пакет, 3 попытки, должна завершится успешно
- Устанавливаем пакет через yum (с правами root)
- Копируем конфигурацию из шаблонов (с правами root) и вызываем хэндлер перезапуска сервиса

Для filebeat дополнительно
- Включаем модуль system для сбора логов, которые генерит сама ОС, команада запускается в директории с исполняемыми файлами filebeat (с правами root). Статус Changed только в том случае, если модель ещё не загуржен
- Создаём дашборды команада запускается в директории с исполняемыми файлами  filebeat (с правами root). Статус Changed отключен, выполнять до успешного заверешения (3 попытки)

